<div class="w-full md:w-64 flex-shrink-0 mb-6 md:mb-0">
    <div class="bg-white rounded-lg shadow overflow-hidden fade-in">
        <!-- User Info -->
        <div class="p-4 flex items-center border-b border-gray-200">
            {% if user.profile.avatar %}
                <img class="h-10 w-10 rounded-full object-cover mr-3" src="{{ user.profile.avatar.url }}" alt="{{ user.username }}">
            {% else %}
                <div class="h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center text-white mr-3">
                    {{ user.username|first|upper }}
                </div>
            {% endif %}
            <div>
                <p class="text-sm font-medium text-gray-900">{{ user.username }}</p>
                <a href="{% url 'accounts:profile' %}" class="text-xs text-primary-600 hover:text-primary-700">View Profile</a>
            </div>
        </div>
        
        <!-- Main Navigation -->
        <div class="p-4 border-b border-gray-200">
            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">
                Main Navigation
            </h3>
            <div class="space-y-1">
                <a href="{% url 'core:dashboard' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'dashboard' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                </a>
                <a href="{% url 'files:file_list' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'file_list' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-folder mr-2"></i> My Files
                </a>
                <a href="{% url 'files:shared_files' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'shared_files' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-share-alt mr-2"></i> Shared with Me
                </a>
                <a href="{% url 'files:file_list' %}?favorite=1" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'file_list' and request.GET.favorite %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-heart mr-2 text-red-500"></i> Favorites
                </a>
            </div>
        </div>
        
        <!-- File Actions -->
        <div class="p-4 border-b border-gray-200">
            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">
                Actions
            </h3>
            <div class="space-y-1">
                <a href="{% url 'files:file_upload' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'file_upload' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-upload mr-2 text-primary-500"></i> Upload Files
                </a>
                <a href="{% url 'files:create_folder' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'create_folder' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-folder-plus mr-2 text-primary-500"></i> Create Folder
                </a>
            </div>
        </div>
        
        <!-- Settings -->
        <div class="p-4">
            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">
                Settings
            </h3>
            <div class="space-y-1">
                <a href="{% url 'accounts:profile_edit' %}" class="block px-3 py-2 rounded-md text-sm {% if request.resolver_match.url_name == 'profile_edit' %}bg-primary-50 text-primary-700{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-user-cog mr-2"></i> Account Settings
                </a>
                <a href="{% url 'accounts:logout' %}" class="block px-3 py-2 rounded-md text-sm text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-sign-out-alt mr-2"></i> Sign Out
                </a>
            </div>
        </div>
    </div>
    
    <!-- Storage Info -->
    <div class="bg-white rounded-lg shadow mt-6 p-4 fade-in">
        <h3 class="text-sm font-medium text-gray-900 mb-2">Storage</h3>
        <div class="relative pt-1">
            {% with usage_percent=user.profile.get_storage_usage_percentage %}
            <div class="overflow-hidden h-2 mb-2 text-xs flex rounded bg-gray-200">
                <div 
                    style="width: {{ usage_percent|default:0 }}%"
                    class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center {% if usage_percent > 90 %}bg-red-500{% elif usage_percent > 70 %}bg-yellow-500{% else %}bg-primary-500{% endif %}">
                </div>
            </div>
        </div>
        <div class="flex justify-between text-xs text-gray-500">
            <span>{{ usage_percent }}% used</span>
            <span>{{ user.profile.get_readable_storage_used }} / {{ user.profile.get_readable_storage_limit }}</span>
        </div>
        {% endwith %}
        <div class="mt-3">
            <p class="text-xs text-gray-600">Available: {{ user.profile.get_available_storage_readable }}</p>
        </div>
    </div>
</div> 